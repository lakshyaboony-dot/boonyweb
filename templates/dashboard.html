{% extends "base.html" %}

{% block title %}Dashboard | Boony English Learning{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Boony Avatar Guide -->
    <div class="boony-guide" id="boonyGuide">
        <div class="boony-avatar">
            <div class="avatar-circle">
                <span class="boony-emoji">ü§ñ</span>
            </div>
            <div class="speech-bubble" id="speechBubble">
                <p id="boonyMessage">‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Ü‡§ú ‡§Ü‡§™‡§ï‡•Ä English learning journey ‡§ï‡•à‡§∏‡•Ä ‡§ö‡§≤ ‡§∞‡§π‡•Ä ‡§π‡•à?</p>
                <button class="speak-btn" id="speakBtn" title="‡§∏‡•Å‡§®‡•á‡§Ç">üîä</button>
            </div>
        </div>
    </div>

    <!-- Enhanced Header -->
    <header class="dashboard-header">
        <div class="welcome-section">
            <div class="greeting-container">
                <h1 id="welcomeMsg">üåü Welcome back, {{ current_user.full_name or "Learner" }}!</h1>
                <p class="motivational-text" id="motivationalText">‡§Ü‡§ú ‡§≠‡•Ä ‡§ï‡•Å‡§õ ‡§®‡§Ø‡§æ ‡§∏‡•Ä‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à‡§Ç?</p>
            </div>
            <div class="day-progress-section">
                <div class="day-selector">
                    <label>üìÖ Current Day:</label>
                    <span id="currentDay" class="day-badge">{{ day }}</span>
                    <select id="daySelector" class="day-select"></select>
                </div>
                <div class="streak-counter">
                    <span class="streak-icon">üî•</span>
                    <span class="streak-text">7 Day Streak!</span>
                </div>
            </div>
        </div>

        <div class="profile-section">
            <div class="profile-card">
                <div class="profile-image-container">
                    {% if current_user.photo %}
                    <img src="{{ url_for('user_photo', filename=current_user.photo) }}" alt="Profile" id="profileImage" class="profile-img">
                    {% else %}
                    <img src="{{ url_for('static', filename='icons/app.jpeg') }}" alt="Profile" id="profileImage" class="profile-img">
                    {% endif %}
                    <div class="level-badge">Level 3</div>
                </div>
                
                <div class="profile-info">
                    <h3>{{ current_user.full_name or "English Learner" }}</h3>
                    <p class="user-level">Intermediate Learner</p>
                </div>

                <div class="upload-group">
                    <input type="file" id="photoInput" accept="image/*">
                    <button id="uploadBtn" class="upload-btn">üì∏ Update Photo</button>
                    <span id="uploadStatus" class="upload-status"></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Enhanced Stats Section -->
    <section class="stats-overview">
        <div class="stats-grid">
            {% for stat_name, stat_val in credits.items() %}
            <div class="stat-card">
                <div class="stat-icon">
                    {% if stat_name == 'points' %}‚≠ê
                    {% elif stat_name == 'streak' %}üî•
                    {% elif stat_name == 'lessons' %}üìö
                    {% elif stat_name == 'words' %}üìù
                    {% else %}üíé{% endif %}
                </div>
                <div class="stat-content">
                    <h3>{{ stat_val }}</h3>
                    <p>{{ stat_name|capitalize }}</p>
                </div>
            </div>
            {% endfor %}
            
            <!-- Additional Progress Stats -->
            <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-content">
                    <h3>85%</h3>
                    <p>Today's Goal</p>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">‚è±Ô∏è</div>
                <div class="stat-content">
                    <h3>45m</h3>
                    <p>Study Time</p>
                </div>
            </div>
        </div>
    </section>

    <div class="main-dashboard">
        <!-- Left Panel: Personalized Guide & Progress -->
        <div class="left-panel">
            <!-- Personalized Learning Path -->
            <div class="learning-path-card">
                <h3>üéØ ‡§Ü‡§™‡§ï‡§æ Learning Path</h3>
                <div class="path-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 65%"></div>
                    </div>
                    <span class="progress-text">65% Complete</span>
                </div>
                <div class="learning-path">
                    <!-- Dynamic content will be loaded here by JavaScript -->
                </div>
                <div class="daily-goal">
                    <!-- Dynamic daily goal will be loaded here -->
                </div>
                <div class="next-milestone">
                    <p><strong>Next Milestone:</strong> Complete 5 more vocabulary exercises</p>
                </div>
            </div>

            <!-- AI Guide Messages -->
            <div class="guide-messages">
                <h3>üí¨ Boony ‡§ï‡•á Messages</h3>
                {% for msg_type, msg_text in guide_messages.items() %}
                <div class="guide-msg" data-text="{{ msg_text }}" id="msg-{{ loop.index }}">
                    <div class="msg-header">
                        <span class="msg-icon">ü§ñ</span>
                        <h4>{{ msg_type }}</h4>
                    </div>
                    <p class="animated-text"></p>
                    <button class="msg-speak-btn" onclick="speakText('{{ msg_text }}')">üîä</button>
                </div>
                {% endfor %}
            </div>

            <!-- Today's Achievements -->
            <div class="achievements-card">
                <h3>üèÜ ‡§Ü‡§ú ‡§ï‡•Ä Achievements</h3>
                <div class="achievement-list">
                    <div class="achievement-item">
                        <span class="achievement-icon">‚úÖ</span>
                        <span>5 new words learned</span>
                    </div>
                    <div class="achievement-item">
                        <span class="achievement-icon">üé§</span>
                        <span>Speaking practice completed</span>
                    </div>
                    <div class="achievement-item pending">
                        <span class="achievement-icon">üìö</span>
                        <span>Complete today's lesson</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel: Activities & Games -->
        <div class="right-panel">
            <!-- Main Learning Activities -->
            <section class="main-activities">
                <h2>üìö ‡§Ü‡§ú ‡§ï‡•á Main Activities</h2>
                <div class="activity-grid activities-right">
                    <a href="{{ url_for('listen_page', day=current_day_num) }}" 
                       class="activity-card listen-card {% if not listen_active %}disabled{% endif %}"
                       data-activity="listening">
                        <div class="activity-icon">üéß</div>
                        <h3>Listen</h3>
                        <p class="activity-desc">‡§∏‡•Å‡§®‡§ï‡§∞ ‡§∏‡§Æ‡§ù‡•á‡§Ç</p>
                        <div class="activity-progress">
                            <div class="progress-bar mini">
                                <div class="progress-fill" style="width: 80%"></div>
                            </div>
                            <span>80%</span>
                        </div>
                    </a>

                    <a href="{{ url_for('speak_page', day=current_day_num) }}" 
                       class="activity-card speak-card {% if not speak_active %}disabled{% endif %}"
                       data-activity="speaking">
                        <div class="activity-icon">üé§</div>
                        <h3>Speak</h3>
                        <p class="activity-desc">‡§¨‡•ã‡§≤‡§ï‡§∞ ‡§∏‡•Ä‡§ñ‡•á‡§Ç</p>
                        <div class="activity-progress">
                            <div class="progress-bar mini">
                                <div class="progress-fill" style="width: 60%"></div>
                            </div>
                            <span>60%</span>
                        </div>
                    </a>

                    <a href="{{ url_for('vocabulary_page', day=current_day_num) }}" 
                       class="activity-card vocab-card {% if not vocabulary_active %}disabled{% endif %}"
                       data-activity="vocabulary">
                        <div class="activity-icon">üìñ</div>
                        <h3>Vocabulary</h3>
                        <p class="activity-desc">‡§®‡§è ‡§∂‡§¨‡•ç‡§¶ ‡§∏‡•Ä‡§ñ‡•á‡§Ç</p>
                        <div class="activity-progress">
                            <div class="progress-bar mini">
                                <div class="progress-fill" style="width: 45%"></div>
                            </div>
                            <span>45%</span>
                        </div>
                    </a>

                    <a href="{{ url_for('revision_page', day=current_day_num) }}" 
                       class="activity-card revision-card {% if not revision_active %}disabled{% endif %}"
                       data-activity="reading">
                        <div class="activity-icon">üîÑ</div>
                        <h3>Revision</h3>
                        <p class="activity-desc">‡§¶‡•ã‡§π‡§∞‡§æ‡§ï‡§∞ ‡§Ø‡§æ‡§¶ ‡§ï‡§∞‡•á‡§Ç</p>
                        <div class="activity-progress">
                            <div class="progress-bar mini">
                                <div class="progress-fill" style="width: 30%"></div>
                            </div>
                            <span>30%</span>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Fun Practice Zone -->
            <section class="fun-zone">
                <h2>üéâ Fun Practice Zone</h2>
                <div class="fun-grid">
                    <div class="fun-card karaoke-card">
                        <div class="fun-icon">üé§</div>
                        <h3>Karaoke</h3>
                        <p>‡§ó‡§æ‡§ï‡§∞ English ‡§∏‡•Ä‡§ñ‡•á‡§Ç</p>
                        <div class="karaoke-preview" id="karaokeText">
                            "Twinkle twinkle little star..."
                        </div>
                        <div class="fun-actions">
                            <button class="preview-btn" onclick="speakText(document.getElementById('karaokeText').innerText)">üîä Preview</button>
                            <a href="{{ url_for('poems_by_day', day=current_day_num) }}" class="fun-btn">Start Karaoke</a>
                        </div>
                    </div>

                    <div class="fun-card antakshari-card">
                        <div class="fun-icon">üî†</div>
                        <h3>Word Antakshari</h3>
                        <p>‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§ï‡§æ ‡§ñ‡•á‡§≤</p>
                        <div class="game-stats">
                            <span>üèÜ Best Score: 45</span>
                        </div>
                        <a href="{{ url_for('antakshari_page') }}" class="fun-btn">Start Game</a>
                    </div>

                    <div class="fun-card forest-card">
                        <div class="fun-icon">üå≥</div>
                        <h3>Vocabulary Forest</h3>
                        <p>‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§ï‡•á ‡§¨‡•Å‡§≤‡§¨‡•Å‡§≤‡•á ‡§´‡•ã‡§°‡§º‡•á‡§Ç</p>
                        <div class="game-stats">
                            <span>üéØ Level: 8</span>
                        </div>
                        <a href="{{ url_for('vocabulary_forest') }}" class="fun-btn">Enter Forest</a>
                    </div>
                </div>
            </section>

            <!-- Quick Actions -->
            {% if actions %}
            <section class="quick-actions">
                <h3>‚ö° Quick Actions</h3>
                <div class="actions-grid">
                    {% for action in actions %}
                    <a href="{{ action.url }}" class="action-card {% if not action.active %}disabled{% endif %}">
                        <span class="action-icon">{{ action.icon }}</span>
                        <div class="action-content">
                            <h4>{{ action.name }}</h4>
                            <p>{{ action.desc }}</p>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </section>
            {% endif %}
        </div>
    </div>

    <!-- Weekly Progress Chart -->
    <section class="progress-chart-section">
        <h3>üìä ‡§á‡§∏ ‡§π‡§´‡•ç‡§§‡•á ‡§ï‡•Ä Progress</h3>
        <div class="chart-container">
            <canvas id="progressChart" width="400" height="200"></canvas>
        </div>
    </section>
</div>

<!-- Enhanced JavaScript -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    // Boony Guide Messages
    const boonyMessages = [
        "‡§Ü‡§ú ‡§Ü‡§™‡§®‡•á ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§ï‡§æ‡§Æ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à! üëè",
        "‡§ö‡§≤‡§ø‡§è ‡§Ü‡§ú ‡§ï‡•Å‡§õ ‡§®‡§è ‡§∂‡§¨‡•ç‡§¶ ‡§∏‡•Ä‡§ñ‡§§‡•á ‡§π‡•à‡§Ç! üìö",
        "Speaking practice ‡§ï‡§∞‡§®‡§æ ‡§® ‡§≠‡•Ç‡§≤‡•á‡§Ç! üé§",
        "‡§Ü‡§™‡§ï‡•Ä progress ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§π‡•à! üåü",
        "Vocabulary game ‡§ñ‡•á‡§≤‡§ï‡§∞ ‡§Æ‡§ú‡§º‡•á ‡§ï‡§∞‡•á‡§Ç! üéÆ"
    ];

    let currentMessageIndex = 0;
    
    function updateBoonyMessage() {
        const messageElement = document.getElementById('boonyMessage');
        const bubble = document.getElementById('speechBubble');
        
        bubble.style.opacity = '0';
        setTimeout(() => {
            messageElement.textContent = boonyMessages[currentMessageIndex];
            bubble.style.opacity = '1';
            currentMessageIndex = (currentMessageIndex + 1) % boonyMessages.length;
        }, 300);
    }

    // Update Boony message every 10 seconds
    setInterval(updateBoonyMessage, 10000);

    // Text-to-Speech function
    window.speakText = function(text) {
        if ('speechSynthesis' in window) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'hi-IN';
            utterance.rate = 0.8;
            speechSynthesis.speak(utterance);
        }
    };

    // Speak button for Boony
    document.getElementById('speakBtn').addEventListener('click', function() {
        const message = document.getElementById('boonyMessage').textContent;
        speakText(message);
    });

    // Day selector functionality
    const daySelector = document.getElementById("daySelector");
    const currentDayElem = document.getElementById("currentDay");
    const currentDay = currentDayElem ? currentDayElem.innerText : "Day-1";
    const currentDayNum = {{ current_day_num }};
    
    for(let i = 1; i <= currentDayNum; i++) {
        let opt = document.createElement("option");
        opt.value = "Day-" + i;
        opt.innerText = "Day " + i;
        if(opt.value === currentDay) opt.selected = true;
        daySelector.appendChild(opt);
    }
    
    daySelector.addEventListener("change", () => {
        window.location.href = "?day=" + daySelector.value;
    });

    // Profile upload functionality
    const uploadBtn = document.getElementById("uploadBtn");
    const photoInput = document.getElementById("photoInput");
    const uploadStatus = document.getElementById("uploadStatus");
    
    uploadBtn.addEventListener("click", () => {
        if(photoInput.files.length === 0) {
            uploadStatus.innerText = "‡§™‡§π‡§≤‡•á ‡§´‡•ã‡§ü‡•ã select ‡§ï‡§∞‡•á‡§Ç";
            uploadStatus.className = "upload-status error";
            return;
        }
        
        let file = photoInput.files[0];
        let formData = new FormData();
        formData.append("photo", file);
        
        uploadStatus.innerText = "Uploading...";
        uploadStatus.className = "upload-status loading";
        
        fetch("{{ url_for('upload_photo') }}", {method: "POST", body: formData})
        .then(res => res.json())
        .then(data => {
            if(data.success) {
                uploadStatus.innerText = "‡§´‡•ã‡§ü‡•ã upload ‡§π‡•ã ‡§ó‡§à! ‚úÖ";
                uploadStatus.className = "upload-status success";
                const profileImg = document.getElementById("profileImage");
                profileImg.src = data.url + "?t=" + new Date().getTime();
            } else {
                uploadStatus.innerText = "Upload failed! ‚ùå";
                uploadStatus.className = "upload-status error";
            }
        })
        .catch(() => {
            uploadStatus.innerText = "Upload error! ‚ùå";
            uploadStatus.className = "upload-status error";
        });
    });

    // Welcome message animation
    const welcomeMsg = document.getElementById("welcomeMsg");
    let welcomeText = welcomeMsg.innerText;
    welcomeMsg.innerText = "";
    welcomeText.split(" ").forEach((word, i) => {
        setTimeout(() => welcomeMsg.innerText += word + " ", i * 200);
    });

    // Guide messages animation
    function animateGuideText(id) {
        const container = document.getElementById(id);
        if(!container) return;
        
        const textElem = container.querySelector(".animated-text");
        const fullText = container.dataset.text || "";
        const words = fullText.split(" ");
        textElem.innerHTML = "";
        
        let index = 0;
        function addWord() {
            if(index >= words.length) return;
            const span = document.createElement("span");
            span.innerText = words[index] + " ";
            span.style.color = "var(--accent-color)";
            textElem.appendChild(span);
            index++;
            setTimeout(addWord, 150);
        }
        addWord();
    }
    
    document.querySelectorAll(".guide-msg").forEach((msg, i) => {
        setTimeout(() => animateGuideText(msg.id), i * 800);
    });

    // Progress Chart
    const canvas = document.getElementById('progressChart');
    if(canvas) {
        const ctx = canvas.getContext('2d');
        const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        const progress = [65, 78, 82, 75, 88, 92, 85];
        
        // Simple chart drawing
        ctx.fillStyle = 'var(--accent-color)';
        ctx.strokeStyle = 'var(--accent-color)';
        ctx.lineWidth = 2;
        
        const barWidth = canvas.width / days.length - 20;
        const maxHeight = canvas.height - 40;
        
        progress.forEach((value, index) => {
            const barHeight = (value / 100) * maxHeight;
            const x = index * (barWidth + 20) + 10;
            const y = canvas.height - barHeight - 20;
            
            ctx.fillRect(x, y, barWidth, barHeight);
            ctx.fillStyle = 'var(--text-primary)';
            ctx.font = '12px Arial';
            ctx.fillText(days[index], x + barWidth/2 - 10, canvas.height - 5);
            ctx.fillText(value + '%', x + barWidth/2 - 10, y - 5);
            ctx.fillStyle = 'var(--accent-color)';
        });
    }

    // Day completion celebration
    if(sessionStorage.getItem("dayCompleted")) {
        showCelebration();
        sessionStorage.removeItem("dayCompleted");
    }

    function showCelebration() {
        const celebration = document.createElement('div');
        celebration.className = 'celebration-popup';
        celebration.innerHTML = `
            <div class="celebration-content">
                <h2>üéâ ‡§¨‡§ß‡§æ‡§à ‡§π‡•ã!</h2>
                <p>‡§Ü‡§™‡§®‡•á ‡§Ü‡§ú ‡§ï‡•á ‡§∏‡§≠‡•Ä activities complete ‡§ï‡§∞ ‡§≤‡§ø‡§è!</p>
                <button onclick="this.parentElement.parentElement.remove()">‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶!</button>
            </div>
        `;
        document.body.appendChild(celebration);
        
        setTimeout(() => {
            if(celebration.parentElement) {
                celebration.remove();
            }
        }, 5000);
    }

    // Activity card hover effects
    document.querySelectorAll('.activity-card, .fun-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });

    // Initialize dashboard with personalization
    initializeDashboard();
});

// Initialize dashboard
function initializeDashboard() {
    loadUserPreferences();
    updateGreeting();
    updateProgress();
    updateAchievements();
    updateWeeklyChart();
    personalizeContent();
    
    // Add click handlers
    document.querySelectorAll('.activity-card').forEach(card => {
        card.addEventListener('click', function() {
            const activity = this.dataset.activity;
            startActivity(activity);
        });
    });
    
    document.querySelectorAll('.fun-card').forEach(card => {
        card.addEventListener('click', function() {
            const game = this.dataset.game;
            startFunActivity(game);
        });
    });
    
    document.querySelectorAll('.action-card').forEach(card => {
        card.addEventListener('click', function() {
            const action = this.dataset.action;
            performQuickAction(action);
        });
    });
}

// Load user preferences and questionnaire data
function loadUserPreferences() {
    // Load from localStorage (questionnaire data)
    const assessmentData = localStorage.getItem('boony_assessment');
    const surveyData = localStorage.getItem('boony.surveyData');
    
    if (assessmentData) {
        try {
            window.userPreferences = JSON.parse(assessmentData);
            console.log('Loaded assessment data:', window.userPreferences);
        } catch (e) {
            console.error('Error parsing assessment data:', e);
        }
    }
    
    if (surveyData) {
        try {
            const survey = JSON.parse(surveyData);
            window.userPreferences = { ...window.userPreferences, ...survey };
            console.log('Loaded survey data:', survey);
        } catch (e) {
            console.error('Error parsing survey data:', e);
        }
    }
    
    // Set default preferences if none found
    if (!window.userPreferences) {
        window.userPreferences = {
            english_level: 'beginner',
            learning_goal: 'conversation',
            focus_area: 'speaking',
            time_availability: '30min',
            learning_style: 'interactive',
            avatar_preference: 'female'
        };
    }
}

// Personalize content based on user preferences
function personalizeContent() {
    if (!window.userPreferences) return;
    
    const prefs = window.userPreferences;
    
    // Personalize learning path
    personalizelearningPath(prefs);
    
    // Personalize AI guide messages
    personalizeGuideMessages(prefs);
    
    // Personalize activity recommendations
    personalizeActivities(prefs);
    
    // Update daily goal based on time availability
    updateDailyGoal(prefs.time_availability);
}

// Personalize learning path based on questionnaire
function personalizelearningPath(prefs) {
    const pathElement = document.querySelector('.learning-path');
    if (!pathElement) return;
    
    let pathContent = '';
    
    // Customize based on English level
    switch (prefs.english_level) {
        case 'beginner':
            pathContent = `
                <div class="path-step active">
                    <span class="step-number">1</span>
                    <span class="step-title">Basic Vocabulary</span>
                    <span class="step-desc">Daily use ‡§ï‡•á 500 words ‡§∏‡•Ä‡§ñ‡•á‡§Ç</span>
                </div>
                <div class="path-step">
                    <span class="step-number">2</span>
                    <span class="step-title">Simple Sentences</span>
                    <span class="step-desc">Basic sentence structure ‡§∏‡§Æ‡§ù‡•á‡§Ç</span>
                </div>
                <div class="path-step">
                    <span class="step-number">3</span>
                    <span class="step-title">Pronunciation</span>
                    <span class="step-desc">Clear pronunciation practice ‡§ï‡§∞‡•á‡§Ç</span>
                </div>
            `;
            break;
        case 'intermediate':
            pathContent = `
                <div class="path-step completed">
                    <span class="step-number">‚úì</span>
                    <span class="step-title">Basic Grammar</span>
                    <span class="step-desc">Foundation complete</span>
                </div>
                <div class="path-step active">
                    <span class="step-number">2</span>
                    <span class="step-title">Fluency Building</span>
                    <span class="step-desc">Natural conversation skills</span>
                </div>
                <div class="path-step">
                    <span class="step-number">3</span>
                    <span class="step-title">Advanced Topics</span>
                    <span class="step-desc">Professional communication</span>
                </div>
            `;
            break;
        case 'advanced':
            pathContent = `
                <div class="path-step completed">
                    <span class="step-number">‚úì</span>
                    <span class="step-title">Grammar Mastery</span>
                    <span class="step-desc">Advanced structures</span>
                </div>
                <div class="path-step active">
                    <span class="step-number">2</span>
                    <span class="step-title">Native Fluency</span>
                    <span class="step-desc">Natural expressions</span>
                </div>
                <div class="path-step">
                    <span class="step-number">3</span>
                    <span class="step-title">Specialization</span>
                    <span class="step-desc">Business/Academic English</span>
                </div>
            `;
            break;
    }
    
    pathElement.innerHTML = pathContent;
}

// Personalize AI guide messages
function personalizeGuideMessages(prefs) {
    const messagesContainer = document.querySelector('.guide-messages');
    if (!messagesContainer) return;
    
    let messages = [];
    
    // Customize messages based on learning goal
    switch (prefs.learning_goal) {
        case 'job':
            messages = [
                "‡§Ü‡§ú job interview ‡§ï‡•á ‡§≤‡§ø‡§è important phrases practice ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç! üíº",
                "Professional email writing skill improve ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ time ‡§π‡•à! ‚úâÔ∏è",
                "Workplace communication ‡§ï‡•á ‡§≤‡§ø‡§è confidence building ‡§ï‡§∞‡•á‡§Ç! üöÄ"
            ];
            break;
        case 'travel':
            messages = [
                "Travel ‡§ï‡•á ‡§≤‡§ø‡§è useful phrases ‡§∏‡•Ä‡§ñ‡§§‡•á ‡§π‡•à‡§Ç! ‚úàÔ∏è",
                "Airport ‡§î‡§∞ hotel conversations practice ‡§ï‡§∞‡•á‡§Ç! üè®",
                "Foreign countries ‡§Æ‡•á‡§Ç confident feel ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã ‡§ú‡§æ‡§è‡§Ç! üåç"
            ];
            break;
        case 'education':
            messages = [
                "Academic English skills develop ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ time ‡§π‡•à! üìö",
                "Presentation ‡§î‡§∞ discussion skills improve ‡§ï‡§∞‡•á‡§Ç! üéì",
                "Study abroad ‡§ï‡•á ‡§≤‡§ø‡§è English proficiency ‡§¨‡§¢‡§º‡§æ‡§è‡§Ç! üåü"
            ];
            break;
        default:
            messages = [
                "Daily conversation skills improve ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ perfect time ‡§π‡•à! üí¨",
                "Confidence building ‡§ï‡•á ‡§∏‡§æ‡§• fluency ‡§¨‡§¢‡§º‡§æ‡§è‡§Ç! üåü",
                "Natural English speaking practice ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç! üó£Ô∏è"
            ];
    }
    
    // Update messages in the container
    const messageElements = messagesContainer.querySelectorAll('.guide-message');
    messageElements.forEach((element, index) => {
        if (messages[index]) {
            element.textContent = messages[index];
        }
    });
}

// Personalize activity recommendations
function personalizeActivities(prefs) {
    const activitiesContainer = document.querySelector('.activities-right');
    if (!activitiesContainer) return;
    
    // Highlight focus area
    const focusActivity = activitiesContainer.querySelector(`[data-activity="${prefs.focus_area}"]`);
    if (focusActivity) {
        focusActivity.classList.add('recommended');
        const badge = document.createElement('div');
        badge.className = 'recommendation-badge';
        badge.textContent = '‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è Recommended';
        focusActivity.appendChild(badge);
    }
    
    // Customize activity descriptions based on learning style
    const activities = activitiesContainer.querySelectorAll('.activity-card');
    activities.forEach(activity => {
        const activityType = activity.dataset.activity;
        let description = activity.querySelector('.activity-desc');
        
        if (description && prefs.learning_style) {
            switch (prefs.learning_style) {
                case 'visual':
                    if (activityType === 'vocabulary') {
                        description.textContent = 'Pictures ‡§î‡§∞ visual aids ‡§ï‡•á ‡§∏‡§æ‡§• words ‡§∏‡•Ä‡§ñ‡•á‡§Ç';
                    }
                    break;
                case 'audio':
                    if (activityType === 'listening') {
                        description.textContent = 'Songs ‡§î‡§∞ podcasts ‡§ï‡•á ‡§∏‡§æ‡§• practice ‡§ï‡§∞‡•á‡§Ç';
                    }
                    break;
                case 'interactive':
                    if (activityType === 'speaking') {
                        description.textContent = 'Games ‡§î‡§∞ interactive exercises ‡§ï‡•á ‡§∏‡§æ‡§•';
                    }
                    break;
            }
        }
    });
}

// Update daily goal based on time availability
function updateDailyGoal(timeAvailability) {
    const goalElement = document.querySelector('.daily-goal');
    if (!goalElement) return;
    
    let goal = '';
    switch (timeAvailability) {
        case '15min':
            goal = '5 new words + 1 conversation';
            break;
        case '30min':
            goal = '10 new words + 2 conversations';
            break;
        case '1hour':
            goal = '20 new words + 3 conversations + 1 lesson';
            break;
        case '2hours':
            goal = '30 new words + 5 conversations + 2 lessons';
            break;
        default:
            goal = '10 new words + 2 conversations';
    }
    
    goalElement.textContent = `‡§Ü‡§ú ‡§ï‡§æ Goal: ${goal}`;
}

// Dummy functions for activity handlers
function updateGreeting() {
    // Update greeting based on time of day
}

function updateProgress() {
    // Update progress indicators
}

function updateAchievements() {
    // Update achievements display
}

function updateWeeklyChart() {
    // Update weekly progress chart
}

function startActivity(activity) {
    // Handle activity start
    console.log('Starting activity:', activity);
}

function startFunActivity(game) {
    // Handle fun activity start
    console.log('Starting fun activity:', game);
}

function performQuickAction(action) {
    // Handle quick action
    console.log('Performing action:', action);
}
</script>

<!-- Enhanced CSS -->
<style>
    :root {
        --boony-primary: #4A90E2;
        --boony-secondary: #7ED321;
        --boony-accent: #F5A623;
        --boony-danger: #D0021B;
        --boony-success: #50E3C2;
        --boony-gradient: linear-gradient(135deg, #4A90E2, #7ED321);
        --shadow-light: 0 2px 10px rgba(0,0,0,0.1);
        --shadow-medium: 0 4px 20px rgba(0,0,0,0.15);
        --shadow-heavy: 0 8px 30px rgba(0,0,0,0.2);
    }

    .dashboard-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
    }

    /* Boony Guide Styles */
    .boony-guide {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        max-width: 300px;
    }

    .boony-avatar {
        display: flex;
        align-items: flex-end;
        gap: 10px;
    }

    .avatar-circle {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: var(--boony-gradient);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: var(--shadow-medium);
        animation: bounce 2s infinite;
    }

    .boony-emoji {
        font-size: 24px;
    }

    .speech-bubble {
        background: white;
        border-radius: 15px;
        padding: 12px 16px;
        box-shadow: var(--shadow-medium);
        position: relative;
        max-width: 220px;
        transition: opacity 0.3s ease;
    }

    .speech-bubble::before {
        content: '';
        position: absolute;
        bottom: 10px;
        left: -8px;
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 8px 8px 8px 0;
        border-color: transparent white transparent transparent;
    }

    .speech-bubble p {
        margin: 0;
        font-size: 14px;
        color: #333;
        line-height: 1.4;
    }

    .speak-btn {
        background: var(--boony-primary);
        border: none;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 8px;
        transition: all 0.3s ease;
    }

    .speak-btn:hover {
        background: var(--boony-secondary);
        transform: scale(1.1);
    }

    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
    }

    /* Enhanced Header */
    .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 30px;
        flex-wrap: wrap;
        gap: 20px;
        background: var(--boony-gradient);
        padding: 25px;
        border-radius: 20px;
        color: white;
        box-shadow: var(--shadow-heavy);
    }

    .welcome-section {
        flex: 1;
        min-width: 300px;
    }

    .greeting-container h1 {
        margin: 0 0 8px 0;
        font-size: 32px;
        font-weight: 700;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .motivational-text {
        font-size: 16px;
        opacity: 0.9;
        margin: 0;
        font-style: italic;
    }

    .day-progress-section {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-top: 15px;
        flex-wrap: wrap;
    }

    .day-selector {
        display: flex;
        align-items: center;
        gap: 8px;
        background: rgba(255,255,255,0.2);
        padding: 8px 12px;
        border-radius: 10px;
    }

    .day-badge {
        background: rgba(255,255,255,0.3);
        padding: 4px 8px;
        border-radius: 6px;
        font-weight: 600;
    }

    .day-select {
        background: rgba(255,255,255,0.2);
        border: 1px solid rgba(255,255,255,0.3);
        color: white;
        padding: 6px 10px;
        border-radius: 6px;
        font-size: 14px;
    }

    .streak-counter {
        display: flex;
        align-items: center;
        gap: 5px;
        background: rgba(255,255,255,0.2);
        padding: 8px 12px;
        border-radius: 10px;
    }

    .streak-icon {
        font-size: 18px;
    }

    /* Enhanced Profile Section */
    .profile-card {
        background: rgba(255,255,255,0.15);
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        backdrop-filter: blur(10px);
        min-width: 200px;
    }

    .profile-image-container {
        position: relative;
        display: inline-block;
        margin-bottom: 12px;
    }

    .profile-img {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid rgba(255,255,255,0.5);
        transition: all 0.3s ease;
    }

    .profile-img:hover {
        transform: scale(1.05);
        border-color: white;
    }

    .level-badge {
        position: absolute;
        bottom: -5px;
        right: -5px;
        background: var(--boony-accent);
        color: white;
        padding: 2px 6px;
        border-radius: 10px;
        font-size: 10px;
        font-weight: 600;
    }

    .profile-info h3 {
        margin: 0 0 4px 0;
        font-size: 16px;
    }

    .user-level {
        margin: 0 0 12px 0;
        font-size: 12px;
        opacity: 0.8;
    }

    .upload-btn {
        background: rgba(255,255,255,0.2);
        border: 1px solid rgba(255,255,255,0.3);
        color: white;
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s ease;
        margin-top: 8px;
    }

    .upload-btn:hover {
        background: rgba(255,255,255,0.3);
        transform: translateY(-2px);
    }

    .upload-status {
        display: block;
        margin-top: 5px;
        font-size: 11px;
    }

    .upload-status.success { color: var(--boony-success); }
    .upload-status.error { color: var(--boony-danger); }
    .upload-status.loading { color: var(--boony-accent); }

    /* Enhanced Stats Section */
    .stats-overview {
        margin-bottom: 30px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
    }

    .stat-card {
        background: var(--surface-secondary);
        padding: 20px;
        border-radius: 15px;
        display: flex;
        align-items: center;
        gap: 12px;
        box-shadow: var(--shadow-light);
        transition: all 0.3s ease;
        border: 1px solid var(--border-color);
    }

    .stat-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-medium);
    }

    .stat-icon {
        font-size: 24px;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--boony-gradient);
        border-radius: 10px;
    }

    .stat-content h3 {
        margin: 0;
        font-size: 24px;
        font-weight: 700;
        color: var(--boony-primary);
    }

    .stat-content p {
        margin: 0;
        font-size: 12px;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    /* Main Dashboard Layout */
    .main-dashboard {
        display: grid;
        grid-template-columns: 350px 1fr;
        gap: 30px;
        margin-bottom: 30px;
    }

    @media (max-width: 1024px) {
        .main-dashboard {
            grid-template-columns: 1fr;
        }
    }

    /* Left Panel */
    .left-panel {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .learning-path-card, .achievements-card {
        background: var(--surface-secondary);
        padding: 20px;
        border-radius: 15px;
        box-shadow: var(--shadow-light);
        border: 1px solid var(--border-color);
    }

    .learning-path-card h3, .achievements-card h3 {
        margin: 0 0 15px 0;
        color: var(--boony-primary);
        font-size: 18px;
    }

    .progress-bar {
        background: var(--border-color);
        height: 8px;
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 8px;
    }

    .progress-fill {
        background: var(--boony-gradient);
        height: 100%;
        border-radius: 4px;
        transition: width 0.3s ease;
    }

    .progress-text {
        font-size: 12px;
        color: var(--text-secondary);
    }

    .next-milestone {
        margin-top: 12px;
        padding: 10px;
        background: rgba(74, 144, 226, 0.1);
        border-radius: 8px;
        border-left: 3px solid var(--boony-primary);
    }

    .next-milestone p {
        margin: 0;
        font-size: 14px;
    }

    /* Guide Messages */
    .guide-messages h3 {
        margin: 0 0 15px 0;
        color: var(--boony-primary);
        font-size: 18px;
    }

    .guide-msg {
        background: var(--surface-secondary);
        padding: 15px;
        border-radius: 12px;
        margin-bottom: 12px;
        box-shadow: var(--shadow-light);
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
        position: relative;
    }

    .guide-msg:hover {
        transform: translateX(5px);
        box-shadow: var(--shadow-medium);
    }

    .msg-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
    }

    .msg-icon {
        font-size: 16px;
    }

    .msg-header h4 {
        margin: 0;
        font-size: 14px;
        color: var(--boony-primary);
    }

    .animated-text {
        font-size: 13px;
        line-height: 1.5;
        color: var(--text-secondary);
    }

    .msg-speak-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: var(--boony-primary);
        border: none;
        border-radius: 50%;
        width: 25px;
        height: 25px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s ease;
    }

    .msg-speak-btn:hover {
        background: var(--boony-secondary);
        transform: scale(1.1);
    }

    /* Achievements */
    .achievement-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .achievement-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px;
        border-radius: 8px;
        background: rgba(126, 211, 33, 0.1);
        border-left: 3px solid var(--boony-success);
    }

    .achievement-item.pending {
        background: rgba(245, 166, 35, 0.1);
        border-left-color: var(--boony-accent);
    }

    .achievement-icon {
        font-size: 16px;
    }

    /* Right Panel - Activities */
    .right-panel {
        display: flex;
        flex-direction: column;
        gap: 25px;
    }

    .main-activities h2, .fun-zone h2 {
        margin: 0 0 20px 0;
        color: var(--boony-primary);
        font-size: 24px;
    }

    .activity-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .activity-card {
        background: var(--surface-secondary);
        padding: 20px;
        border-radius: 15px;
        text-decoration: none;
        color: var(--text-primary);
        transition: all 0.3s ease;
        box-shadow: var(--shadow-light);
        border: 1px solid var(--border-color);
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .activity-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--boony-gradient);
    }

    .activity-card:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: var(--shadow-heavy);
    }

    .activity-card.disabled {
        opacity: 0.5;
        pointer-events: none;
    }

    .activity-icon {
        font-size: 32px;
        margin-bottom: 10px;
    }

    .activity-card h3 {
        margin: 0 0 5px 0;
        font-size: 18px;
        color: var(--boony-primary);
    }

    .activity-card p {
        margin: 0 0 12px 0;
        font-size: 12px;
        color: var(--text-secondary);
    }

    .activity-progress {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 10px;
    }

    .progress-bar.mini {
        height: 4px;
        flex: 1;
    }

    .activity-progress span {
        font-size: 11px;
        color: var(--text-secondary);
        font-weight: 600;
    }

    /* Specific activity card colors */
    .listen-card::before { background: linear-gradient(135deg, #FF6B6B, #FF8E53); }
    .speak-card::before { background: linear-gradient(135deg, #4ECDC4, #44A08D); }
    .vocab-card::before { background: linear-gradient(135deg, #A8E6CF, #7FCDCD); }
    .revision-card::before { background: linear-gradient(135deg, #FFD93D, #FF6B6B); }

    /* Fun Zone */
    .fun-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }

    .fun-card {
        background: var(--surface-secondary);
        padding: 20px;
        border-radius: 15px;
        box-shadow: var(--shadow-light);
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
        text-align: center;
    }

    .fun-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-medium);
    }

    .fun-icon {
        font-size: 36px;
        margin-bottom: 12px;
    }

    .fun-card h3 {
        margin: 0 0 8px 0;
        color: var(--boony-primary);
        font-size: 18px;
    }

    .fun-card p {
        margin: 0 0 15px 0;
        color: var(--text-secondary);
        font-size: 14px;
    }

    .karaoke-preview {
        background: rgba(74, 144, 226, 0.1);
        padding: 10px;
        border-radius: 8px;
        font-style: italic;
        margin-bottom: 12px;
        font-size: 13px;
    }

    .fun-actions {
        display: flex;
        gap: 8px;
        justify-content: center;
        flex-wrap: wrap;
    }

    .preview-btn {
        background: var(--boony-secondary);
        border: none;
        padding: 6px 12px;
        border-radius: 6px;
        color: white;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .preview-btn:hover {
        background: var(--boony-primary);
        transform: scale(1.05);
    }

    .fun-btn {
        background: var(--boony-gradient);
        color: white;
        padding: 10px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
        display: inline-block;
    }

    .fun-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-medium);
    }

    .game-stats {
        background: rgba(245, 166, 35, 0.1);
        padding: 8px;
        border-radius: 6px;
        margin-bottom: 12px;
        font-size: 12px;
        color: var(--boony-accent);
        font-weight: 600;
    }

    /* Quick Actions */
    .quick-actions h3 {
        margin: 0 0 15px 0;
        color: var(--boony-primary);
        font-size: 18px;
    }

    .actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
    }

    .action-card {
        display: flex;
        align-items: center;
        gap: 12px;
        background: var(--surface-secondary);
        padding: 12px;
        border-radius: 10px;
        text-decoration: none;
        color: var(--text-primary);
        transition: all 0.3s ease;
        border: 1px solid var(--border-color);
    }

    .action-card:hover {
        transform: translateX(5px);
        box-shadow: var(--shadow-light);
    }

    .action-card.disabled {
        opacity: 0.5;
        pointer-events: none;
    }

    .action-icon {
        font-size: 20px;
    }

    .action-content h4 {
        margin: 0 0 2px 0;
        font-size: 14px;
        color: var(--boony-primary);
    }

    .action-content p {
        margin: 0;
        font-size: 12px;
        color: var(--text-secondary);
    }

    /* Progress Chart Section */
    .progress-chart-section {
        background: var(--surface-secondary);
        padding: 25px;
        border-radius: 15px;
        box-shadow: var(--shadow-light);
        border: 1px solid var(--border-color);
        text-align: center;
    }

    .progress-chart-section h3 {
        margin: 0 0 20px 0;
        color: var(--boony-primary);
        font-size: 20px;
    }

    .chart-container {
        display: flex;
        justify-content: center;
    }

    #progressChart {
        max-width: 100%;
        height: auto;
    }

    /* Celebration Popup */
    .celebration-popup {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        animation: fadeIn 0.3s ease;
    }

    .celebration-content {
        background: white;
        padding: 30px;
        border-radius: 20px;
        text-align: center;
        max-width: 400px;
        animation: slideUp 0.3s ease;
    }

    .celebration-content h2 {
        color: var(--boony-primary);
        margin: 0 0 15px 0;
        font-size: 28px;
    }

    .celebration-content p {
        color: #333;
        margin: 0 0 20px 0;
        font-size: 16px;
    }

    .celebration-content button {
        background: var(--boony-gradient);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .celebration-content button:hover {
        transform: scale(1.05);
        box-shadow: var(--shadow-medium);
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes slideUp {
        from { transform: translateY(50px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .dashboard-container {
            padding: 15px;
        }

        .dashboard-header {
            flex-direction: column;
            text-align: center;
        }

        .day-progress-section {
            justify-content: center;
        }

        .stats-grid {
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        }

        .activity-grid {
            grid-template-columns: 1fr;
        }

        .fun-grid {
            grid-template-columns: 1fr;
        }

        .boony-guide {
            position: relative;
            bottom: auto;
            right: auto;
            margin: 20px 0;
            max-width: 100%;
        }

        .boony-avatar {
            justify-content: center;
        }
    }

    /* Hide file input */
    #photoInput {
        display: none;
    }

    /* Personalized Dashboard Styles */
    .recommended {
        border: 2px solid #FFD700 !important;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.3) !important;
        position: relative;
    }

    .recommendation-badge {
        position: absolute;
        top: -10px;
        right: -10px;
        background: linear-gradient(45deg, #FFD700, #FFA500);
        color: #333;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 10px;
        font-weight: bold;
        box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
        z-index: 10;
    }

    .path-step {
        display: flex;
        align-items: center;
        padding: 15px;
        margin: 10px 0;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        border-left: 4px solid #ddd;
        transition: all 0.3s ease;
    }

    .path-step.active {
        border-left-color: #4CAF50;
        background: rgba(76, 175, 80, 0.1);
    }

    .path-step.completed {
        border-left-color: #2196F3;
        background: rgba(33, 150, 243, 0.1);
    }

    .step-number {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: #ddd;
        color: #333;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 15px;
        font-size: 14px;
    }

    .path-step.active .step-number {
        background: #4CAF50;
        color: white;
    }

    .path-step.completed .step-number {
        background: #2196F3;
        color: white;
    }

    .step-title {
        font-weight: bold;
        margin-right: 10px;
        color: #333;
    }

    .step-desc {
        font-size: 12px;
        color: #666;
    }

    .daily-goal {
        background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
        color: white;
        padding: 15px;
        border-radius: 12px;
        text-align: center;
        font-weight: bold;
        margin: 20px 0;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .learning-path {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 20px;
        margin: 20px 0;
    }
</style>

<script src="{{ url_for('static', filename='js/adventure.js') }}"></script>

{% endblock %}
